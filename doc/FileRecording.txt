NAME

        use Beyonwiz::Recording::FileRecording;

SYNOPSIS

    Download recordings from the Beyonwiz.

SUPERCLASS

    Inherits from "Beyonwiz::Recording::Index"

METHODS

    "Beyonwiz::Recording::FileRecording->new($path, $ts, $date, $episode,
    $resume, $force)"
        Create a new Beyonwiz recording downloader object. $path is the base
        path for local Beyonwiz recordings. If $ts is true, the download
        will be into a single ".ts" file, otherwise the recording will be
        copied as it is on the Beyonwiz. If $date is true, the recording
        date is added to the recording name. If $episode is true, the
        recording episode name is added to the recording name if the episode
        name contains any non-blank characters. Useful for downloading
        series recordings. If $resume is true, allow resumption of recording
        download that appear to be incomplete. If $force is true, allow a
        download to overwrite an existing download.

    "$r->path([$val]);"
        Returns (sets) recording path name.

    "$r->getRecordingFileChunk($path, $name, $file, $outdir, $append, $off,
    $size, $outOff, $progressBar);"
        Download a chunk of a recording corresponding to a single
        "Beyonwiz::Recording::TruncEntry".

        $path is the URL path to the folder containing the recording's files
        on the Beyonwiz. $name is the name of the recording folder or file
        (if "$r->ts" is true). $file is the name of the Beyonwiz file
        containing the chunk. $append is false if $file is to be created,
        true if it is to be appended to. $off and $size is the chunk to be
        transferred. If $outdir is defined and not the empty string, the
        record file is placed in that directory, rather than the current
        directory. $outoff is the offset to where to write the chunk into
        the output file. $progressBar is as defined below in
        "$r->getRecordng(...)".

        Returns "RC_OK" if successful. Otherwise it will print a warning
        with the system error message, and return one of "RC_FORBIDDEN",
        "RC_NOT_FOUND" or "RC_BAD_REQUEST".

    "$r->getRecordingFile($path, $name, $outdir, $file, $append);"
        Download a complete 0000, 0001, etc. recording file or header file
        from the Beyonwiz. Note that more than one
        "Beyonwiz::Recording::TruncEntry" may refer to any given file.

        $path, $name, $outdir, $file and $append are as in
        *getRecordingFileChunk*.

        Returns "RC_OK" if successful. Otherwise it will print a warning
        with the system error message, and return one of "RC_FORBIDDEN",
        "RC_NOT_FOUND" or "RC_BAD_REQUEST".

    "$r->renameRecording($hdr, $path, $outdir)"
        Move a recording described by $hdr and the given source $path (from
        the recording's "Beyonwiz::Recording::IndexEntry") to $outdir by
        renaming the recording directory. Returns "RC_OK" if successful.

        On Unix(-like) systems, "renameRecording" will fail if the source
        and destinations for the move are on different file systems. It will
        also fail if "$r->ts" is true and it will fail if the source
        recording is on the Beyonwiz. In all these cases, it will return
        "RC_NOT_IMPLEMENTED", and not print a warning.

        For other errors it will print a warning with the system error
        message, and return one of "RC_FORBIDDEN", "RC_NOT_FOUND" or
        "RC_INTERNAL_SERVER_ERROR".

    "$r->deleteRecordingFile($path, $name, $file)"
        Delete a recording file. $path is the path name from the recording's
        "Beyonwiz::Recording::IndexEntry". $name is the name of the
        recording, and $file is the name of the file within the recording to
        delete.

        Returns "RC_OK" if successful. Otherwise it will print a warning
        with the system error message, and return one of "RC_FORBIDDEN",
        "RC_NOT_FOUND" or "RC_INTERNAL_SERVER_ERROR".

PREREQUISITES

    Uses packages: "Beyonwiz::Recording::Recording",
    "Beyonwiz::Recording::Trunc", "Beyonwiz::Recording::Header",
    "Beyonwiz::Utils", "LWP::Simple", "URI", "URI::Escape", "HTTP::Status",
    "File::Basename", "File::Spec::Functions", "Errno", "POSIX".

BUGS

    The progress callback may have inaccuracies when transferring a
    recording as-is from the Beyonwiz if the recording has been edited or
    made from the timeshift buffer.

    Uses "bignum" for 64-bit integers, even when the underlying Perl
    integers are 64 bits.

